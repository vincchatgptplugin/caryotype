:root {
  --bg: radial-gradient(1200px 800px at 20% 20%, #1b2333 0%, #0f1420 60%, #0a0c12 100%);
  --card: rgba(255,255,255,0.06);
  --muted: #cbd5e1;
  --text: #e6edf3;
  --accent: #7dd3fc;
  --accent-2: #a78bfa;
  --good: #22c55e;
  --bad: #ef4444;
  --slot: rgba(255,255,255,0.08);
  --drop-bg: linear-gradient(180deg, rgba(10,20,35,0.55), rgba(13,24,40,0.55));
  --drop-border: rgba(125,211,252,0.18);
  --drop-glow: rgba(125,211,252,0.25);
}

* { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#app { min-height: 100%; }

/* Screens */
.screen { display: none; min-height: 100vh; align-items: center; justify-content: flex-start; flex-direction: column; gap: 12px; padding: 24px; width: 100%; }
.screen.active { display: flex; }
/* Center the home screen specifically */
#start-screen { justify-content: center; }

.card {
  background: linear-gradient(180deg, var(--card), rgba(255,255,255,0.03));
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 16px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.05);
  padding: 28px 28px 24px;
  max-width: 720px;
  width: 100%;
  text-align: center;
}

h1 { margin: 0 0 8px; font-size: 40px; letter-spacing: 0.3px; }
.subtitle { margin: 0 0 16px; color: var(--muted); }

.btn-row { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
.btn {
  appearance: none; border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.06);
  color: var(--text); padding: 10px 14px; border-radius: 12px; cursor: pointer;
  transition: transform .1s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease;
  backdrop-filter: blur(4px);
}
.btn:hover { transform: translateY(-1px); background: rgba(255,255,255,0.1); }
.btn:active { transform: translateY(0); }
.btn.primary { background: linear-gradient(135deg, var(--accent), var(--accent-2)); border-color: transparent; color: #081018; font-weight: 600; }
.btn.ghost { background: transparent; }
.btn:disabled { opacity: .5; cursor: not-allowed; }

.hud { display: grid; grid-template-columns: 1fr 1fr auto; gap: 12px; align-items: center; margin: 12px auto 12px; max-width: 1040px; width: 100%; padding: 0 8px; }
.hud-item { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; padding: 8px 12px; display: flex; align-items: center; gap: 8px; }
.hud-item span { color: var(--muted); font-size: 12px; }
.hud-item strong { font-size: 18px; letter-spacing: .5px; }

.prompt { text-align: center; margin: 8px auto 4px; color: var(--muted); max-width: 960px; }

.stage { max-width: 1040px; margin: 8px auto 24px; padding: 12px; }
.stage.hidden { display: none; }
.stage h2 { margin: 0 0 8px; font-size: 20px; }
.hint { margin: 4px 0 12px; color: var(--muted); font-size: 14px; }

.board { display: grid; gap: 20px; grid-template-columns: 420px 1fr; grid-template-areas: 'pool slots'; align-items: start; max-width: 1280px; margin: 0 auto; }
@media (max-width: 900px) { .board { grid-template-columns: 1fr; grid-template-areas: 'pool' 'slots'; } }

.slots { grid-area: slots; display: grid; grid-template-columns: repeat(4, minmax(220px, 1fr)); gap: 20px; padding: 22px; background: var(--drop-bg); border: 1px solid var(--drop-border); border-radius: 20px; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02), 0 10px 30px rgba(0,0,0,0.35), 0 0 24px var(--drop-glow); }
@media (max-width: 1100px) {
  .slots { grid-template-columns: repeat(2, minmax(240px, 1fr)); }
}
.slot { min-height: 340px; border-radius: 18px; background: linear-gradient(180deg, rgba(12,20,34,0.8), rgba(18,30,48,0.75)); border: 1px dashed rgba(125,211,252,0.25); position: relative; padding: 16px; display: flex; align-items: center; justify-content: space-evenly; gap: 12px; flex-wrap: nowrap; overflow: visible; transition: outline .15s ease, transform .15s ease, background .2s ease, box-shadow .2s ease; }
.slot:hover { outline: 2px solid rgba(255,255,255,0.12); }
.slot.filled { border-style: solid; }
.slot.over { background: linear-gradient(180deg, rgba(20,36,62,0.9), rgba(22,40,70,0.85)); box-shadow: 0 0 0 2px rgba(125,211,252,0.45), 0 0 26px rgba(56,189,248,0.35), inset 0 0 22px rgba(56,189,248,0.18); }
.slot-label { position: absolute; top: 10px; left: 12px; text-align: left; color: var(--muted); font-size: 12px; pointer-events: none; }

.pool { grid-area: pool; display: grid; grid-template-columns: repeat(2, 1fr); gap: 14px; padding: 16px; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); border-radius: 16px; min-height: 300px; }

/* Chromosome visuals */
.chromosome { width: 90px; height: 200px; position: relative; cursor: grab; user-select: none; display: grid; place-items: center; --scale: 1; }
.chromosome:active { cursor: grabbing; }
.chromosome[draggable="true"] { touch-action: none; }
.chromosome .label { display: none; }
.chromosome .art { width: auto; height: 160px; transform: scale(var(--scale)); transform-origin: 50% 50%;
  /* Keep deep blue fill from SVG and add neon glow */
  filter: drop-shadow(0 2px 10px rgba(56,189,248,0.28)) drop-shadow(0 0 18px rgba(56,189,248,0.22));
  pointer-events: none; user-select: none; -webkit-user-drag: none;
}

/* Size differences for pairs */
.pair-1 { --scale: 1.00; }
.pair-2 { --scale: 0.80; }
.pair-3 { --scale: 0.60; }
.pair-4 { --scale: 0.45; }

/* Clickable zone */
.zone { position: absolute; width: 14px; height: 14px; border-radius: 999px; border: 2px solid rgba(0,0,0,0.25); background: radial-gradient(circle at 40% 40%, #fff 0%, #ffd166 30%, #f59e0b 60%, #c2410c 100%); left: 50%; transform: translateX(-50%); box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.6), 0 0 0 6px rgba(245,158,11,0.12); animation: pulse 2s infinite; pointer-events: none; opacity: 0.12; z-index: 2; }
.zone.enabled { pointer-events: auto; opacity: 1; }
.zone.highlight { box-shadow: 0 0 0 0 rgba(34,197,94,0.7), 0 0 0 8px rgba(34,197,94,0.18); animation: pulseGreen 1.8s infinite; }
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.6), 0 0 0 6px rgba(245,158,11,0.12);} 70% { box-shadow: 0 0 0 10px rgba(245, 158, 11, 0);} 100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0);} }
@keyframes pulseGreen { 0% { box-shadow: 0 0 0 0 rgba(34,197,94,0.7), 0 0 0 8px rgba(34,197,94,0.18);} 70% { box-shadow: 0 0 0 12px rgba(34,197,94,0);} 100% { box-shadow: 0 0 0 0 rgba(34,197,94,0);} }

.actions { text-align: center; margin-top: 10px; }

/* Confetti canvas overlay */
#confetti { position: fixed; inset: 0; pointer-events: none; }

/* Zoom modal */
.modal { position: fixed; inset: 0; display: grid; place-items: center; background: rgba(5,10,18,0.6); backdrop-filter: blur(4px); z-index: 50; }
.modal.hidden { display: none; }
.zoom-card { background: linear-gradient(180deg, rgba(16,24,40,0.8), rgba(10,16,28,0.8)); border: 1px solid rgba(125,211,252,0.18); border-radius: 18px; padding: 18px 22px; box-shadow: 0 10px 40px rgba(0,0,0,0.5), 0 0 24px rgba(56,189,248,0.2); }
.zoom-chromosome { position: relative; width: 240px; height: 380px; display: grid; place-items: center; }
.zoom-chromosome .art { height: 320px; filter: drop-shadow(0 3px 14px rgba(56,189,248,0.28)) drop-shadow(0 0 18px rgba(56,189,248,0.22)); }
.modal .zone { width: 18px; height: 18px; opacity: 1; }

/* Utility */
.hidden { display: none !important; }
